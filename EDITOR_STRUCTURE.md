# ğŸ“ ç¼–è¾‘å™¨ç»„ä»¶ç»“æ„è¯´æ˜

## ç»„ä»¶æ¶æ„

ç¼–è¾‘å™¨é‡‡ç”¨æ¸…æ™°çš„ä¸‰å±‚ç»“æ„è®¾è®¡ï¼Œæ¯ä¸ªéƒ¨åˆ†èŒè´£æ˜ç¡®ï¼š

```
FloatingEditor.vue (çˆ¶ç»„ä»¶)
â”œâ”€â”€ EditorHeader.vue (é¡¶éƒ¨æ ‡é¢˜åŒºåŸŸ)
â”œâ”€â”€ EditorSidebar.vue (å·¦ä¾§æ ‘å½¢åˆ—è¡¨)
â”‚   â”œâ”€â”€ ActivityBar (æ´»åŠ¨æ )
â”‚   â””â”€â”€ FileExplorer.vue (æ–‡ä»¶èµ„æºç®¡ç†å™¨)
â”‚       â””â”€â”€ FileTreeNode.vue (æ–‡ä»¶æ ‘èŠ‚ç‚¹)
â””â”€â”€ EditorContent.vue (å³ä¾§ç¼–è¾‘å™¨åŒºåŸŸ)
    â”œâ”€â”€ TabBar (æ ‡ç­¾æ )
    â”œâ”€â”€ CodeEditor.vue (ä»£ç ç¼–è¾‘å™¨)
    â””â”€â”€ OutputPanel (è¾“å‡ºé¢æ¿)
```

## ç»„ä»¶è¯¦è§£

### 1. FloatingEditor.vue (çˆ¶ç»„ä»¶)

**èŒè´£ï¼š**

- ç®¡ç†æ•´ä¸ªç¼–è¾‘å™¨çš„çŠ¶æ€å’Œé€»è¾‘
- å¤„ç†æ–‡ä»¶æ‰“å¼€ã€åˆ‡æ¢ã€å…³é—­
- å¤„ç†ä»£ç æ‰§è¡Œ
- ç®¡ç†æ‹–æ‹½åŠŸèƒ½
- å¤„ç†é”®ç›˜å¿«æ·é”®

**ä¸»è¦çŠ¶æ€ï¼š**

```typescript
- isEditorVisible: ç¼–è¾‘å™¨æ˜¯å¦å¯è§
- isMinimized: æ˜¯å¦æœ€å°åŒ–
- isDarkTheme: æ˜¯å¦æš—è‰²ä¸»é¢˜
- isSidebarVisible: ä¾§è¾¹æ æ˜¯å¦å¯è§
- openFiles: å·²æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨
- currentFile: å½“å‰æ¿€æ´»çš„æ–‡ä»¶
- code: å½“å‰ä»£ç å†…å®¹
- output: ä»£ç æ‰§è¡Œè¾“å‡º
```

**ä¸»è¦æ–¹æ³•ï¼š**

```typescript
- toggleEditor(): æ‰“å¼€/å…³é—­ç¼–è¾‘å™¨
- toggleTheme(): åˆ‡æ¢ä¸»é¢˜
- onFileSelect(): å¤„ç†æ–‡ä»¶é€‰æ‹©
- switchToFile(): åˆ‡æ¢æ–‡ä»¶
- closeFile(): å…³é—­æ–‡ä»¶
- runCode(): æ‰§è¡Œä»£ç 
- startDrag(): å¼€å§‹æ‹–æ‹½
```

**å¿«æ·é”®ï¼š**

- `Ctrl+E` / `Cmd+E`: æ‰“å¼€/å…³é—­ç¼–è¾‘å™¨
- `Ctrl+Enter` / `Cmd+Enter`: è¿è¡Œä»£ç 

---

### 2. EditorHeader.vue (é¡¶éƒ¨æ ‡é¢˜åŒºåŸŸ)

**èŒè´£ï¼š**

- æ˜¾ç¤ºç¼–è¾‘å™¨æ ‡é¢˜å’Œå½“å‰æ–‡ä»¶å
- æä¾›å·¥å…·æ æŒ‰é’®ï¼ˆè¯­è¨€é€‰æ‹©ã€ä¸»é¢˜åˆ‡æ¢ã€è¿è¡Œç­‰ï¼‰
- æä¾›çª—å£æ§åˆ¶æŒ‰é’®ï¼ˆæœ€å°åŒ–ã€å…³é—­ï¼‰

**Propsï¼š**

```typescript
- currentFile: å½“å‰æ–‡ä»¶ä¿¡æ¯
- language: å½“å‰è¯­è¨€
- isDarkTheme: æ˜¯å¦æš—è‰²ä¸»é¢˜
- isMinimized: æ˜¯å¦æœ€å°åŒ–
```

**Eventsï¼š**

```typescript
- update:language: è¯­è¨€æ”¹å˜
- toggle-theme: åˆ‡æ¢ä¸»é¢˜
- toggle-sidebar: åˆ‡æ¢ä¾§è¾¹æ 
- run-code: è¿è¡Œä»£ç 
- toggle-minimize: æœ€å°åŒ–
- close: å…³é—­ç¼–è¾‘å™¨
```

**å¸ƒå±€ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš€ Editor Browser  main.js  â”‚  [JSâ–¼] [â˜€ï¸] [ğŸ“] [â–¶ï¸] [ğŸ”½] [âœ•] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. EditorSidebar.vue (å·¦ä¾§æ ‘å½¢åˆ—è¡¨)

**èŒè´£ï¼š**

- æä¾›æ´»åŠ¨æ ï¼ˆèµ„æºç®¡ç†å™¨ã€æœç´¢ç­‰ï¼‰
- æ˜¾ç¤ºæ–‡ä»¶èµ„æºç®¡ç†å™¨
- æ˜¾ç¤ºæœç´¢é¢æ¿

**å†…éƒ¨çŠ¶æ€ï¼š**

```typescript
- activeTab: å½“å‰æ¿€æ´»çš„æ ‡ç­¾ ('explorer' | 'search')
- searchQuery: æœç´¢å…³é”®è¯
```

**Eventsï¼š**

```typescript
- file-select: æ–‡ä»¶è¢«é€‰ä¸­
```

**å¸ƒå±€ï¼š**

```
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ğŸ“â”‚ èµ„æºç®¡ç†å™¨      â”‚
â”‚  â”‚ â”œâ”€ src         â”‚
â”‚ğŸ”â”‚ â”‚  â”œâ”€ App.vue  â”‚
â”‚  â”‚ â”‚  â””â”€ main.ts  â”‚
â”‚  â”‚ â””â”€ package.jsonâ”‚
â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­ç»„ä»¶ï¼š**

- **ActivityBar**: å·¦ä¾§å›¾æ ‡æ ï¼Œç”¨äºåˆ‡æ¢ä¸åŒé¢æ¿
- **FileExplorer**: æ–‡ä»¶èµ„æºç®¡ç†å™¨ï¼Œæ˜¾ç¤ºæ–‡ä»¶æ ‘

---

### 4. EditorContent.vue (å³ä¾§ç¼–è¾‘å™¨åŒºåŸŸ)

**èŒè´£ï¼š**

- æ˜¾ç¤ºå·²æ‰“å¼€æ–‡ä»¶çš„æ ‡ç­¾æ 
- æ˜¾ç¤ºä»£ç ç¼–è¾‘å™¨
- æ˜¾ç¤ºä»£ç æ‰§è¡Œè¾“å‡º

**Propsï¼š**

```typescript
- openFiles: å·²æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨
- currentFile: å½“å‰æ–‡ä»¶
- code: ä»£ç å†…å®¹
- language: ç¼–ç¨‹è¯­è¨€
- theme: ä¸»é¢˜ ('light' | 'dark')
- output: è¾“å‡ºå†…å®¹
```

**Eventsï¼š**

```typescript
- update:code: ä»£ç å†…å®¹æ”¹å˜
- switch-file: åˆ‡æ¢æ–‡ä»¶
- close-file: å…³é—­æ–‡ä»¶
- clear-output: æ¸…é™¤è¾“å‡º
```

**å¸ƒå±€ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸŸ¨ main.js âœ•] [ğŸŸ¢ App.vue âœ•]          â”‚ â† æ ‡ç­¾æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  function greet(name) {                 â”‚
â”‚    return `Hello, ${name}!`;            â”‚
â”‚  }                                      â”‚ â† ä»£ç ç¼–è¾‘å™¨
â”‚                                         â”‚
â”‚  console.log(greet('World'));           â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å‡º:                              [âœ•]  â”‚
â”‚ Hello, World!                           â”‚ â† è¾“å‡ºé¢æ¿
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­ç»„ä»¶ï¼š**

- **TabBar**: æ–‡ä»¶æ ‡ç­¾æ 
- **CodeEditor**: CodeMirror ç¼–è¾‘å™¨
- **OutputPanel**: è¾“å‡ºé¢æ¿

---

## æ•°æ®æµ

### æ–‡ä»¶é€‰æ‹©æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»æ–‡ä»¶
    â†“
FileTreeNode è§¦å‘ select äº‹ä»¶
    â†“
FileExplorer è½¬å‘ file-select äº‹ä»¶
    â†“
EditorSidebar è½¬å‘ file-select äº‹ä»¶
    â†“
FloatingEditor å¤„ç† onFileSelect()
    â†“
æ›´æ–° openFiles å’Œ currentFile
    â†“
åŠ è½½æ–‡ä»¶å†…å®¹åˆ° code
    â†“
EditorContent æ˜¾ç¤ºä»£ç 
```

### ä»£ç æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»è¿è¡ŒæŒ‰é’® / æŒ‰ Ctrl+Enter
    â†“
EditorHeader è§¦å‘ run-code äº‹ä»¶
    â†“
FloatingEditor å¤„ç† runCode()
    â†“
æ‰§è¡Œ code ä¸­çš„ä»£ç 
    â†“
æ•è· console.log è¾“å‡º
    â†“
æ›´æ–° output
    â†“
EditorContent æ˜¾ç¤ºè¾“å‡º
```

### ä¸»é¢˜åˆ‡æ¢æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»ä¸»é¢˜æŒ‰é’®
    â†“
EditorHeader è§¦å‘ toggle-theme äº‹ä»¶
    â†“
FloatingEditor å¤„ç† toggleTheme()
    â†“
æ›´æ–° isDarkTheme
    â†“
è®¾ç½® document.documentElement data-theme å±æ€§
    â†“
CSS å˜é‡è‡ªåŠ¨åˆ‡æ¢
    â†“
æ‰€æœ‰ç»„ä»¶æ ·å¼æ›´æ–°
```

## æ ·å¼ç³»ç»Ÿ

æ‰€æœ‰ç»„ä»¶éƒ½ä½¿ç”¨ç»Ÿä¸€çš„ VS Code ä¸»é¢˜ç³»ç»Ÿï¼š

### CSS å˜é‡

```css
var(--vscode-bg-primary)
var(--vscode-sidebar-bg)
var(--vscode-text-primary)
...
```

### UnoCSS ç±»

```html
vscode-sidebar vscode-titlebar vscode-tab vscode-button ...
```

### é¢œè‰²ç±»

```html
bg-vscode-sidebar-bg text-vscode-text-primary border-vscode-sidebar-border ...
```

## ç»„ä»¶é€šä¿¡

### Props Down, Events Up

- **çˆ¶ â†’ å­**: é€šè¿‡ Props ä¼ é€’æ•°æ®
- **å­ â†’ çˆ¶**: é€šè¿‡ Events è§¦å‘äº‹ä»¶

### ç¤ºä¾‹

```vue
<!-- çˆ¶ç»„ä»¶ -->
<EditorHeader
  :current-file="currentFile"
  :language="currentLanguage"
  @toggle-theme="toggleTheme"
  @run-code="runCode"
/>

<!-- å­ç»„ä»¶ -->
<script setup>
defineProps<{ currentFile: FileItem }>()
defineEmits<{ 'toggle-theme': [] }>()
</script>
```

## æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶                 | è¡Œæ•° | èŒè´£                   |
| -------------------- | ---- | ---------------------- |
| `FloatingEditor.vue` | ~400 | ä¸»ç¼–è¾‘å™¨é€»è¾‘å’ŒçŠ¶æ€ç®¡ç† |
| `EditorHeader.vue`   | ~80  | æ ‡é¢˜æ å’Œå·¥å…·æ          |
| `EditorSidebar.vue`  | ~60  | ä¾§è¾¹æ å’Œæ´»åŠ¨æ          |
| `EditorContent.vue`  | ~100 | ç¼–è¾‘å™¨å†…å®¹åŒºåŸŸ         |
| `FileExplorer.vue`   | ~150 | æ–‡ä»¶èµ„æºç®¡ç†å™¨         |
| `FileTreeNode.vue`   | ~150 | æ–‡ä»¶æ ‘èŠ‚ç‚¹             |
| `CodeEditor.vue`     | ~100 | CodeMirror ç¼–è¾‘å™¨å°è£…  |

## ä¼˜åŠ¿

### âœ… æ¸…æ™°çš„èŒè´£åˆ†ç¦»

- æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šåŠŸèƒ½
- æ˜“äºç†è§£å’Œç»´æŠ¤

### âœ… å¯å¤ç”¨æ€§

- ç»„ä»¶å¯ä»¥ç‹¬ç«‹ä½¿ç”¨
- æ˜“äºæµ‹è¯•

### âœ… å¯æ‰©å±•æ€§

- æ·»åŠ æ–°åŠŸèƒ½åªéœ€ä¿®æ”¹å¯¹åº”ç»„ä»¶
- ä¸å½±å“å…¶ä»–éƒ¨åˆ†

### âœ… æ€§èƒ½ä¼˜åŒ–

- ç»„ä»¶æŒ‰éœ€æ¸²æŸ“
- å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“

## ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```vue
<template>
  <FloatingEditor />
</template>

<script setup>
import FloatingEditor from './components/FloatingEditor.vue'
</script>
```

### è‡ªå®šä¹‰é…ç½®

```vue
<template>
  <FloatingEditor :initial-position="{ x: 200, y: 200 }" :initial-theme="'light'" />
</template>
```

## ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

1. **çŠ¶æ€ç®¡ç†**: è€ƒè™‘ä½¿ç”¨ Pinia ç®¡ç†å…¨å±€çŠ¶æ€
2. **æ–‡ä»¶ç³»ç»Ÿ**: é›†æˆçœŸå®çš„æ–‡ä»¶ç³»ç»Ÿ API
3. **ä»£ç é«˜äº®**: å¢å¼ºè¯­æ³•é«˜äº®å’Œæ™ºèƒ½æç¤º
4. **å¤šæ ‡ç­¾é¡µ**: æ”¯æŒå¤šä¸ªç¼–è¾‘å™¨å®ä¾‹
5. **æ’ä»¶ç³»ç»Ÿ**: æ”¯æŒæ‰©å±•å’Œæ’ä»¶
